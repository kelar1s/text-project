# text-project: Иерархическая модель представления текста (С++)

## Описание проекта

Данный проект представляет собой реализацию программной библиотеки на языке C++ для моделирования и обработки текстов, обладающих сложной внутренней структурой (книги, документация, оглавления).

В отличие от линейных моделей (массивов строк), здесь используется **иерархическая модель данных**, позволяющая сохранять логические связи вложенности (разделы, главы, параграфы).

В основе реализации лежит структура данных **«Дерево общего вида»**, реализованная через представление **«Первый потомок — Следующий сосед»** (Left Child — Right Sibling). Это обеспечивает оптимальное использование памяти и высокую производительность при добавлении элементов.

## Ключевые особенности

- **Эффективная структура:** Использование двух указателей (`pDown` и `pNext`) для представления узлов с произвольным количеством потомков.
- **Безопасность памяти:** Корректное управление динамической памятью и предотвращение утечек с помощью рекурсивного деструктора в классе `TextTree`.
- **Соответствие STL:** Реализован класс-итератор (`TextIterator`), который позволяет использовать дерево в стандартных циклах `range-based for` (обход в глубину).
- **Наглядность:** Предоставлена функция вывода структуры текста с отступами, отражающими уровень вложенности.

## Архитектура классов

Проект состоит из трех основных классов, следующих принципам объектно-ориентированного программирования:

| Класс              | Назначение                                                         | Ключевые поля/методы                                                                                            |
| :----------------- | :----------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- |
| **`TextNode`**     | Узел данных (листовой элемент иерархии).                           | `std::string text`, `TextNode *pNext`, `TextNode *pDown`.                                                       |
| **`TextTree`**     | Класс-контейнер. Отвечает за управление структурой и ресурсами.    | `TextNode *pRoot`, `addDown()`, `addNext()`, `begin()`, `end()`, `toString()`.                                  |
| **`TextIterator`** | Инструмент для обхода дерева. Реализует логику итерации в глубину. | `TextNode *pCurr`, `std::stack<TextNode*> stack` (для сохранения точек возврата), перегруженный `operator++()`. |

## Принцип работы итератора

`TextIterator` реализует **обход в глубину (Depth-First Search)**.

1.  **Спуск вниз:** Приоритет отдается переходу к первому потомку (`pDown`). Если текущий узел имеет соседа (`pNext`), указатель на этого соседа помещается в `stack` для последующего возврата.
2.  **Переход вправо:** Если потомков нет, итератор переходит к следующему соседу (`pNext`).
3.  **Возврат наверх:** Если нет ни потомков, ни соседей (достигнут конец ветви), итератор извлекает последний сохраненный указатель из `stack` и переходит к нему, продолжая обход на верхнем уровне.

## Сборка и запуск

Проект использует систему сборки **CMake** (минимальная требуемая версия 3.15) и стандарт C++17.

### 1. Требования

- Компилятор C++ (GCC, Clang и др., поддерживающий C++17).
- Утилита CMake (версия 3.15+).

### 2. Компиляция

Для сборки проекта используйте современный синтаксис CMake.

```bash
# 1. Конфигурация проекта (создание каталога 'build' и генерация файлов сборки)
cmake -S . -B build

# 2. Сборка исполняемого файла (используя все доступные ядра процессора для ускорения)
cmake --build build --parallel
```

В результате сборки будет создан исполняемый файл с именем `text_project` внутри каталога `build`.

### 3. Запуск

Запуск исполняемого файла из рабочего каталога (корня проекта):

```bash
./build/text_project
```

## Как использовать

Для использования структуры `TextTree` достаточно создать объект класса и использовать методы добавления.

Пример создания структуры:

```cpp
#include "TextTree.hpp"
#include <iostream>

int main() {
    TextTree tree;

    // Создание корня
    TextNode* root = tree.setRoot("Документ 1");

    // Добавление разделов верхнего уровня (идут по pNext)
    TextNode* ch1 = tree.addDown(root, "Глава 1. Теоретические основы");
    TextNode* ch2 = tree.addNext(ch1, "Глава 2. Архитектура системы");
    TextNode* conclusion = tree.addNext(ch2, "Заключение");

    // Добавление подразделов в Главу 1 (идут по pDown от ch1, далее по pNext)
    TextNode* sub1_1 = tree.addDown(ch1, "1.1. Модель иерархического списка");
    TextNode* sub1_2 = tree.addNext(sub1_1, "1.2. Концепция итераторов");

    // Вывод структуры
    std::cout << tree.toString() << std::endl;

    // Использование итератора (range-based for cycle)
    std::cout << "\nОбход всех узлов:\n";
    for (TextNode& node : tree) {
        std::cout << "-> " << node.getText() << "\n";
    }

    // Деструктор вызовется автоматически, очищая память.
    return 0;
}
```

## Разработка с использованием Dev Container

Проект настроен для работы в стандартизированном контейнере разработки с использованием `VS Code Dev Containers`. Это гарантирует, что у всех разработчиков будет идентичная среда с установленными компиляторами (GCC) и необходимыми расширениями (CMake Tools, C/C++).

### Конфигурация Dev Container

Конфигурация задана в файле `.devcontainer/devcontainer.json` и включает:

| **Параметр**            | **Значение**                                     | **Назначение**                                                                     |
| ----------------------- | ------------------------------------------------ | ---------------------------------------------------------------------------------- |
| `dockerfile`            | `../Dockerfile`                                  | Указывает на файл Dockerfile, определяющий среду.                                  |
| `remoteUser`            | `root`                                           | Пользователь, под которым происходит работа в контейнере.                          |
| `workspaceFolder`       | `/text-project`                                  | Рабочий каталог внутри контейнера.                                                 |
| `extensions`            | `C/C++ Extension Pack`, `CMake Tools`, `GitLens` | Необходимый набор расширений VS Code для разработки на C++ с использованием CMake. |
| `cmake.configureOnOpen` | `true`                                           | Автоматическая конфигурация проекта CMake при открытии рабочей области.            |

Для начала работы в этой среде просто откройте репозиторий в VS Code и следуйте предложению "Reopen in Container".
